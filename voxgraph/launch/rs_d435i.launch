<launch>
  <param name="use_sim_time" value="true" />

  <include file="$(find orb_slam2_ros)/ros/launch/orb_slam2_d435_rgbd.launch" />
  <!-- <node pkg="tf" type="static_transform_publisher" name="map_to_odom" args="0 0 0 0 0 1 0 /map /odom 100" /> -->
  <!-- <node pkg="tf" type="static_transform_publisher" name="camera_link_to_imu" args="0 0 0 0 0 1 0 /camera_link /imu 100" /> -->

  <node pkg="nodelet" type="nodelet" name="pcl_manager" args="manager" output="screen" />

  <!-- Run a VoxelGrid filter to clean NaNs and downsample the data -->
  <node pkg="nodelet" type="nodelet" name="point_cloud_pass_through" args="load pcl/PassThrough pcl_manager" output="screen">
    <remap from="~input" to="/camera/depth_registered/points" />
    <rosparam>
      filter_field_name: z
      filter_limit_min: 0.01
      filter_limit_max: 2.5
      filter_limit_negative: False
    </rosparam>
  </node>

  <arg name="pointcloud_topic" value="/point_cloud_pass_through/output" />
  <arg name="rosbag_skip_first_n_sec" value="5" />
  <arg name="debug_mode" value="false" />
  <arg name="show_rviz" value="false" />

  <include file="$(find voxgraph)/launch/voxgraph_mapper_d435i.launch" pass_all_args="true" />
</launch>
