<launch>
  <param name="use_sim_time" value="true" />
  
  <include file="$(find orb_slam2_ros)/ros/launch/orb_slam2_tum2_rgbd.launch" />

  <node pkg="nodelet" type="nodelet" name="nodelet_manager" args="manager" output="screen"/>

  <node pkg="nodelet" type="nodelet" name="cloudify"
        args="load depth_image_proc/point_cloud_xyzrgb nodelet_manager --no-bond">
    <remap from="depth_registered/image_rect" to="/camera/depth/image"/>
    <remap from="depth_registered/points" to="/camera/depth/color/points"/>
    <remap from="rgb/image_rect_color" to="/camera/rgb/image_color"/>
    <remap from="rgb/camera_info" to="/camera/rgb/camera_info"/>
  </node>

  <node pkg="tf" type="static_transform_publisher" name="world_to_odom" args="0 0 0 0 0 1 0 /world /odom 100" />
  <node pkg="tf" type="static_transform_publisher" name="openni_rgb_optical_to_imu" args="0 0 0 0 0 1 0 /openni_rgb_optical_frame /imu 100" />
  <!-- <node pkg="tf" type="static_transform_publisher" name="kinect_to_imu" args="0 0 0 0 0 1 0 /kinect /imu 100" /> -->
  <arg name="pointcloud_topic" value="/camera/depth/color/points" />
  <arg name="rosbag_skip_first_n_sec" value="1" />
  <arg name="debug_mode" value="false" />
  <arg name="show_rviz" value="true" />

  <include file="$(find voxgraph)/launch/voxgraph_mapper.launch" pass_all_args="true" />
</launch>
